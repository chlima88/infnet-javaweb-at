<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Libapp - Gest√£o de bibliotecas</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script
            src="https://code.jquery.com/jquery-3.1.1.min.js"
            integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8="
            crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.css">
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.5.0/dist/semantic.min.js"></script>
</head>
<body>
    <div class="ui container">
        <table class="ui celled table" style="visibility: hidden"></table>
    </div>
</body>
<script src="/scripts/top-menu.js" ></script>
<script>
    document.onload = (async () => {
        document.querySelectorAll("nav a").forEach(i => {
            i.href == i.baseURI && i.classList.add("active")
        })

        const data = await fetch(
            "http://localhost:8080/api/doctor",
            { method: "get"})
            .then(response => response.json());
        const table = document.querySelector("div table")
        if (!data.length) return

        table.style.visibility="visible";
        const thead = document.createElement("thead")
        const theadrow = document.createElement("tr")

        Object.keys(data[0]).forEach(key => {
            const th = document.createElement("th")
            th.innerText = key;
            th.style.textTransform="capitalize"
            theadrow.appendChild(th);
            thead.appendChild(theadrow);
        })
        const tbody = document.createElement("tbody")
        data.forEach(item => {
            const tr = document.createElement("tr")
            Object.values(item).forEach(value => {
                const td = document.createElement("td")
                td.innerText = value;
                tr.appendChild(td)
            })
            tbody.appendChild(tr)
        })
        if (!table.childElementCount) table.style.visibility="visible";
        table.appendChild(thead);
        table.appendChild(tbody);
    })()


    $(document).ready(function(){
        $('.ui.dropdown').dropdown();
    });


</script>
</html>